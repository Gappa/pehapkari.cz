{% extends '@!EasyAdmin/default/layout.html.twig' %}

{% block main %}
    <div class="pt-4 pb-4 pl-4 pr-4">
        <h2 class="text-center">
            Provize ze školení <strong>{{ trainingTerm }}</strong>
        </h2>

        <p class="text-center">Školil <strong>{{ trainer.getName() }}</strong></p>

        <br>

        <div class="row">
            <div class="col-6">
                <table class="table table-bordered">
                    <thead class="bg-success text-white text-center">
                        <tr>
                            <th colspan="2">Vyúčtování</th>
                        </tr>
                    </thead>
                    <tr>
                        <td>Učastníků x cena školení</td>
                        <td class="text-right">
                            {# @todo add fakturováno #}
                            {# @todo add zaplaceno - tabulka vpravo pro work in progress #}
                            {# @todo add odkaz na sync faktur #}

                            {{ trainingTerm.getParticipantCount() }} x
                            {{ training.getPrice()|number_format }} Kč
                        </td>
                    </tr>
                    <tr>
                        <td>Příjem</td>
                        <td class="text-right text-success">{{ income|number_format }} Kč</td>
                    </tr>
                    <tr>
                        <td>
                            Náklady

                            <a class="btn btn-info btn-sm pull-right" href="{{ path('easyadmin', {action: 'new', entity: 'Expense', trainingTerm: trainingTerm.getId() }) }}">Přidat náklad</a>
                            {# todo link přímo na náklad tohoto termínu šklení, slug! #}

                        </td>
                        <td class="text-right text-danger">- {{ expense|number_format }} Kč</td>
                    </tr>

                    <tr class="bg-dark text-light">
                        <th>Zisk</th>
                        <th class="text-right">{{ profit|number_format }} Kč</th>
                    </tr>
                </table>
            </div>
        </div>

        <br>
        <hr>

        <h3 class="text-center mt-1 mb-3">Provize</h3>

        <div class="row">
            <div class="col-4">
                <table class="table table-bordered">
                    <thead class="bg-warning text-white text-center">
                        <tr>
                            <th colspan="2">Školitel</th>
                        </tr>
                    </thead>
                    <tr>
                        <td>Podíl ze zisku</td>
                        <td class="text-right">{{ trainerProvisionRate }} %</td>
                    </tr>
                    <tr>
                        <td>Podíl</td>
                        <td class="text-right">{{ trainerProvision|number_format }} Kč</td>
                    </tr>
                    <tr>
                        <td>Náklady <span class="text-muted">(oběd)</span></td>
                        <td class="text-right">{{ trainerExpense|number_format }} Kč</td>
                    </tr>
                    <tr>
                        <th>Celkem poslat</th>
                        <th class="text-right">{{ trainerProvisionWithExpense|number_format }} Kč</th>
                    </tr>
                    <tr>
                        <td colspan="2" class="text-center">
                            <a href="..." class="btn btn-lg btn-info">
                                Poslat žádost o fakturu mailem
                            </a>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-4">
                <table class="table table-bordered">
                    <thead class="bg-warning text-white text-center">
                    <tr>
                        <th colspan="2">Organizátor</th>
                    </tr>
                    </thead>
                    <tr>
                        <td>Podíl ze zisku</td>
                        <td class="text-right">{{ organizerProvisionRate }} %</td>
                    </tr>
                    <tr>
                        <td>Podíl</td>
                        <td class="text-right">{{ organizerProvision|number_format }} Kč</td>
                    </tr>
                    <tr>
                        <td>Náklady <span class="text-muted">(tisk, občerstvení)</span></td>
                        <td class="text-right">{{ organizerExpense|number_format }} Kč</td>
                    </tr>
                    <tr>
                        <th>Celkem poslat</th>
                        <th class="text-right">{{ organizerProvisionWithExpense|number_format }} Kč</th>
                    </tr>
                    <tr>
                        <td colspan="2" class="text-center">
                            <a href="..." class="btn btn-lg btn-info">
                                Poslat žádost o fakturu mailem
                            </a>
                        </td>
                    </tr>
                </table>
            </div>

            <div class="col-4">
                <table class="table table-bordered">
                    <thead class="bg-warning text-white text-center">
                    <tr>
                        <th colspan="2">Vlastík</th>
                    </tr>
                    </thead>
                    <tr>
                        <td>Podíl ze zisku</td>
                        <td class="text-right">{{ ownerProvisionRate }} %</td>
                    </tr>
                    <tr>
                        <th>Podíl</th>
                        <th class="text-right">{{ ownerProvision|number_format }} Kč</th>
                    </tr>
                    <tr>
                        <td>
                            Náklady
                            <span class="text-muted">(nájem)</span>
                        </td>
                        <td class="text-right">{{ ownerExpense|number_format }} Kč</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
{% endblock %}
